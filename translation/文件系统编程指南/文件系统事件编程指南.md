# 文件系统事件编程指南  

## 简介  
当目录层级结构及内容进行修改时， 文件系统事件API 为应用程序提供了可监听的回调通知。 例如， 您的应用程序可以快速的监测到用户何时使用另一个应用程序修改了项目包中的文件。   
它还提供了一种轻巧的方法来确定自您的应用程序上次检查目录层次结构以来，目录层次结构的内容是否已更改。例如，备份应用程序可以使用它来确定自给定时间戳或给定事件ID以来哪些文件已更改。   


如果您的应用程序处理大量文件，尤其是如果您的应用程序处理大量文件层次结构，则应阅读本文档。      


### 章节  
本文档分为以下章节：  
* 概述 -- 描述稳健性同事件API并从更高层次解释其工作方式   
* 如何使用API -- 解释如何使用文件系统事件API， 从创建事件流到编写处理程序， 包括快速入门的代码示例   
* 安全性-- 描述文件系统事件API 的安全性功能  
* 内核队列： 文件系统事件的替代方法-- 解释了内核队列机制， 描述了何时适合使用内核队列API 代替文件系统API ，并包含一个简短的示例代码   


##  概述 
文件系统事件API 是 10.5版本和更高版本中可用的一项 新技术， 使用它， 可以注册 通知，监听内容或目录层级结构进行更改。  
文件系统事件由三部分组成： 通过特殊设备将事件通知传递到内核用户态(例如  spotlight)； 守护程序过滤该流并发出通知；一个永久性数据库，用于存储整个时间内所有更改的记录。 


当您的应用程序注册了该通知时，每次 受监听的目录层次结构中的任何文件发生更改时， 文件系统事件守护程序都会发送通知。如果目录本身被修改 (例如： 其权限更改或添加了新文件)，它也会发送通知。最重要的一点是， 通知的粒度在目录级别， 它仅告诉你目录中 的某些内容发生了更改，但不会告诉更改了什么。  
